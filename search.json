[{"path":"https://impala-consortium.github.io/ctasval/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2024 ctasval authors Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"https://impala-consortium.github.io/ctasval/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Björn Koneswarakantha. Author, maintainer. Pekka Tiikkainen. Author. Frederik Colin. Author. IMPALA. Copyright holder.","code":""},{"path":"https://impala-consortium.github.io/ctasval/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Koneswarakantha B, Tiikkainen P, Colin F (2024). ctasval: Validate ctas. R package version 0.0.1.","code":"@Manual{,   title = {ctasval: Validate ctas},   author = {Björn Koneswarakantha and Pekka Tiikkainen and Frederik Colin},   year = {2024},   note = {R package version 0.0.1}, }"},{"path":"https://impala-consortium.github.io/ctasval/index.html","id":"ctasval","dir":"","previous_headings":"","what":"Validate ctas","title":"Validate ctas","text":"goal ctasval provide structured code validate {ctas} performance study data.","code":""},{"path":"https://impala-consortium.github.io/ctasval/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Validate ctas","text":"can install development version ctasval GitHub :","code":"# install.packages(\"devtools\") devtools::install_github(\"IMPALA-Consortium/ctas\") devtools::install_github(\"IMPALA-Consortium/ctasval\")"},{"path":"https://impala-consortium.github.io/ctasval/index.html","id":"ctasval-1","dir":"","previous_headings":"","what":"ctasval","title":"Validate ctas","text":"ctasval adds three anomalous sites data set iteration tries detect using {ctas}. samples study site pool first determine number patients samples sufficient number patients study patient pool.","code":"library(pharmaversesdtm) library(dplyr) #>  #> Attaching package: 'dplyr' #> The following objects are masked from 'package:stats': #>  #>     filter, lag #> The following objects are masked from 'package:base': #>  #>     intersect, setdiff, setequal, union library(future) library(ctasval)   set.seed(1)  df_prep <- prep_sdtm_lb(pharmaversesdtm::lb, pharmaversesdtm::dm, scramble = TRUE)  df_filt <- df_prep %>%   filter(parameter_id %in% c(\"Alkaline Phosphatase\", \"Alanine Aminotransferase\"))  plan(multisession, workers = 6)  ctas <- ctasval(   df = df_filt,   fun_anomaly = c(anomaly_average, anomaly_sd),   feats = c(\"average\", \"sd\"),   parallel = TRUE,   iter = 100,   n_sites = 3,   anomaly_degree = c(0, 0.5, 1, 2, 10, 50),   thresh = 1 )  plan(sequential)  ctas #> $result #> # A tibble: 28 × 9 #>    anomaly_degree feats   parameter_id      TN    FN    FP    TP     tpr     fpr #>             <dbl> <chr>   <chr>          <int> <int> <int> <int>   <dbl>   <dbl> #>  1            0   sd      Alanine Amino…  1597   299     3     1 0.00333 1.87e-3 #>  2            0   sd      Alkaline Phos…  1567   298    33     2 0.00667 2.06e-2 #>  3            0   average Alanine Amino…  1598   297     2     3 0.01    1.25e-3 #>  4            0   average Alkaline Phos…  1563   298    37     2 0.00667 2.31e-2 #>  5            0.5 sd      Alanine Amino…  1599   295     1     5 0.0167  6.25e-4 #>  6            0.5 sd      Alkaline Phos…  1580   268    20    32 0.107   1.25e-2 #>  7            0.5 average Alanine Amino…  1600   299     0     1 0.00333 0       #>  8            0.5 average Alkaline Phos…  1576   282    24    18 0.06    1.5 e-2 #>  9            1   sd      Alanine Amino…  1600   282     0    18 0.06    0       #> 10            1   sd      Alkaline Phos…  1577   248    23    52 0.173   1.44e-2 #> # ℹ 18 more rows #>  #> $anomaly #> # A tibble: 954,674 × 38 #>     iter anomaly_degree fun_anomaly feats STUDYID      DOMAIN subject_id   LBSEQ #>    <int>          <dbl> <list>      <chr> <chr>        <chr>  <chr>        <dbl> #>  1     1              0 <fn>        sd    CDISCPILOT01 LB     sample_site…     2 #>  2     1              0 <fn>        sd    CDISCPILOT01 LB     sample_site…    39 #>  3     1              0 <fn>        sd    CDISCPILOT01 LB     sample_site…    74 #>  4     1              0 <fn>        sd    CDISCPILOT01 LB     sample_site…   104 #>  5     1              0 <fn>        sd    CDISCPILOT01 LB     sample_site…   134 #>  6     1              0 <fn>        sd    CDISCPILOT01 LB     sample_site…   164 #>  7     1              0 <fn>        sd    CDISCPILOT01 LB     sample_site…   199 #>  8     1              0 <fn>        sd    CDISCPILOT01 LB     sample_site…   231 #>  9     1              0 <fn>        sd    CDISCPILOT01 LB     sample_site…   262 #> 10     1              0 <fn>        sd    CDISCPILOT01 LB     sample_site…   299 #> # ℹ 954,664 more rows #> # ℹ 30 more variables: LBTESTCD <chr>, LBTEST <chr>, LBCAT <chr>, #> #   LBORRES <chr>, LBORRESU <chr>, LBORNRLO <chr>, LBORNRHI <chr>, #> #   LBSTRESC <chr>, LBSTRESN <dbl>, LBSTRESU <chr>, LBSTNRLO <dbl>, #> #   LBSTNRHI <dbl>, LBNRIND <chr>, LBBLFL <chr>, VISITNUM <dbl>, VISIT <chr>, #> #   VISITDY <dbl>, LBDTC <chr>, LBDY <dbl>, timepoint_rank <dbl>, #> #   timepoint_1_name <chr>, result <dbl>, parameter_id <chr>, … #>  #> attr(,\"class\") #> [1] \"ctasval_aggregated\""},{"path":"https://impala-consortium.github.io/ctasval/index.html","id":"performance-metrics","dir":"","previous_headings":"ctasval","what":"Performance Metrics","title":"Validate ctas","text":"","code":"ctas$result %>%   knitr::kable(digits = 3)"},{"path":"https://impala-consortium.github.io/ctasval/index.html","id":"anamolous-sites","dir":"","previous_headings":"ctasval","what":"Anamolous Sites","title":"Validate ctas","text":"Anomalous Sites scores can reviewed.","code":"ctas$anomaly %>%   select(     iter,     anomaly_degree,     feats,     parameter_id,     site,     subject_id,     timepoint_rank,     result,     score   ) %>%   arrange(iter, desc(anomaly_degree), parameter_id, feats, site, subject_id, timepoint_rank) %>%   head(50) %>%   knitr::kable()"},{"path":"https://impala-consortium.github.io/ctasval/reference/anomaly.html","id":null,"dir":"Reference","previous_headings":"","what":"Create site with anomolous patients — anomaly_average","title":"Create site with anomolous patients — anomaly_average","text":"Average","code":""},{"path":"https://impala-consortium.github.io/ctasval/reference/anomaly.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create site with anomolous patients — anomaly_average","text":"","code":"anomaly_average(df, anomaly_degree, site = \"sample_site\")  anomaly_sd(df, anomaly_degree, site = \"sample_site\")"},{"path":"https://impala-consortium.github.io/ctasval/reference/anomaly.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create site with anomolous patients — anomaly_average","text":"df Data frame containing study data. anomaly_degree Degree anomaly add. site prefix new sites, Default \"sample_site\".","code":""},{"path":"https://impala-consortium.github.io/ctasval/reference/anomaly.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create site with anomolous patients — anomaly_average","text":"data frame added anomalies.","code":""},{"path":"https://impala-consortium.github.io/ctasval/reference/anomaly.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create site with anomolous patients — anomaly_average","text":"","code":"set.seed(1) library(ggplot2)  df_prep <- prep_sdtm_lb(pharmaversesdtm::lb, pharmaversesdtm::dm, scramble = TRUE)  df_filt <- df_prep %>%   filter(parameter_id == \"Alkaline Phosphatase\")  df_anomaly <- anomaly_average(df_filt, anomaly_degree = 2, site = \"anomolous\")  ggplot(df_filt, aes(x = timepoint_rank, y = result, group = subject_id)) + geom_line(color = \"black\") + geom_line(data = df_anomaly, color = \"tomato\") + coord_cartesian(xlim = c(0, max(df_anomaly$timepoint_rank)))   set.seed(1) library(ggplot2)  df_prep <- prep_sdtm_lb(pharmaversesdtm::lb, pharmaversesdtm::dm, scramble = TRUE)  df_filt <- df_prep %>%   filter(parameter_id == \"Alkaline Phosphatase\")  df_anomaly <- anomaly_sd(df_filt, anomaly_degree = 2, site = \"anomolous\")  ggplot(df_filt, aes(x = timepoint_rank, y = result, group = subject_id)) + geom_line(color = \"black\") + geom_line(data = df_anomaly, color = \"tomato\") + coord_cartesian(xlim = c(0, max(df_anomaly$timepoint_rank)))"},{"path":"https://impala-consortium.github.io/ctasval/reference/ctasval.html","id":null,"dir":"Reference","previous_headings":"","what":"CTAS Validation — ctasval","title":"CTAS Validation — ctasval","text":"function performs CTAS validation generating anomalies, calculating scores, summarizing performance metrics.","code":""},{"path":"https://impala-consortium.github.io/ctasval/reference/ctasval.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"CTAS Validation — ctasval","text":"","code":"ctasval(   df,   fun_anomaly,   feats,   anomaly_degree = c(0, 0.5, 1, 5, 10, 50),   thresh = 1,   iter = 100,   n_sites = 3,   parallel = FALSE,   progress = TRUE,   default_minimum_timepoints_per_series = 3,   default_minimum_subjects_per_series = 3,   default_max_share_missing_timepoints_per_series = 0.5,   default_generate_change_from_baseline = FALSE,   autogenerate_timeseries = TRUE )"},{"path":"https://impala-consortium.github.io/ctasval/reference/ctasval.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"CTAS Validation — ctasval","text":"df Data frame containing study data. fun_anomaly List functions apply generate anomalies. feats List features calculate timeseries. anomaly_degree Vector anomaly degrees add. Default c(0, 0.5, 1, 5, 10, 50). thresh Threshold classification. Default 1.0. iter Number iterations run. Default 100. n_sites Number sites generate. Default 3. parallel Logical indicating whether run parallel. Default FALSE. progress Logical indicating whether show progress. Default TRUE. default_minimum_timepoints_per_series Minimum timepoints per series. Default 3. default_minimum_subjects_per_series Minimum subjects per series. Default 3. default_max_share_missing_timepoints_per_series Maximum share missing timepoints per series. Default 0.5. default_generate_change_from_baseline Logical indicating whether generate change baseline. Default FALSE. autogenerate_timeseries Logical indicating whether auto-generate timeseries. Default TRUE.","code":""},{"path":"https://impala-consortium.github.io/ctasval/reference/ctasval.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"CTAS Validation — ctasval","text":"list containing performance metrics anomaly data.","code":""},{"path":"https://impala-consortium.github.io/ctasval/reference/ctasval.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"CTAS Validation — ctasval","text":"","code":"df_prep <- prep_sdtm_lb(pharmaversesdtm::lb, pharmaversesdtm::dm, scramble = TRUE)  df_filt <- df_prep %>%   filter(parameter_id == \"Alkaline Phosphatase\")  ctas <- ctasval(   df = df_filt,   fun_anomaly = c(anomaly_average, anomaly_sd),   feats = c(\"average\", \"sd\"),   parallel = FALSE,   iter = 1 )  ctas #> $result #> # A tibble: 14 × 9 #>    anomaly_degree feats   parameter_id          TN    FN    FP    TP   tpr   fpr #>             <dbl> <chr>   <chr>              <int> <int> <int> <int> <dbl> <dbl> #>  1            0   sd      Alkaline Phosphat…    17     3     0     0 0         0 #>  2            0   average Alkaline Phosphat…    17     3     0     0 0         0 #>  3            0.5 sd      Alkaline Phosphat…    17     3     0     0 0         0 #>  4            0.5 average Alkaline Phosphat…    17     3     0     0 0         0 #>  5            1   sd      Alkaline Phosphat…    17     3     0     0 0         0 #>  6            1   average Alkaline Phosphat…    17     3     0     0 0         0 #>  7            2   sd      Alkaline Phosphat…    17     3     0     0 0         0 #>  8            2   average Alkaline Phosphat…    17     3     0     0 0         0 #>  9            5   sd      Alkaline Phosphat…    17     3     0     0 0         0 #> 10            5   average Alkaline Phosphat…    17     3     0     0 0         0 #> 11           10   sd      Alkaline Phosphat…    17     3     0     0 0         0 #> 12           10   average Alkaline Phosphat…    17     3     0     0 0         0 #> 13           50   sd      Alkaline Phosphat…    17     2     0     1 0.333     0 #> 14           50   average Alkaline Phosphat…    17     3     0     0 0         0 #>  #> $anomaly #> # A tibble: 5,088 × 38 #>     iter anomaly_degree fun_anomaly feats STUDYID      DOMAIN subject_id   LBSEQ #>    <int>          <dbl> <list>      <chr> <chr>        <chr>  <chr>        <dbl> #>  1     1              0 <fn>        sd    CDISCPILOT01 LB     sample_site…     2 #>  2     1              0 <fn>        sd    CDISCPILOT01 LB     sample_site…    39 #>  3     1              0 <fn>        sd    CDISCPILOT01 LB     sample_site…    74 #>  4     1              0 <fn>        sd    CDISCPILOT01 LB     sample_site…   104 #>  5     1              0 <fn>        sd    CDISCPILOT01 LB     sample_site…   134 #>  6     1              0 <fn>        sd    CDISCPILOT01 LB     sample_site…   164 #>  7     1              0 <fn>        sd    CDISCPILOT01 LB     sample_site…   199 #>  8     1              0 <fn>        sd    CDISCPILOT01 LB     sample_site…   229 #>  9     1              0 <fn>        sd    CDISCPILOT01 LB     sample_site…   259 #> 10     1              0 <fn>        sd    CDISCPILOT01 LB     sample_site…     2 #> # ℹ 5,078 more rows #> # ℹ 30 more variables: LBTESTCD <chr>, LBTEST <chr>, LBCAT <chr>, #> #   LBORRES <chr>, LBORRESU <chr>, LBORNRLO <chr>, LBORNRHI <chr>, #> #   LBSTRESC <chr>, LBSTRESN <dbl>, LBSTRESU <chr>, LBSTNRLO <dbl>, #> #   LBSTNRHI <dbl>, LBNRIND <chr>, LBBLFL <chr>, VISITNUM <dbl>, VISIT <chr>, #> #   VISITDY <dbl>, LBDTC <chr>, LBDY <dbl>, timepoint_rank <dbl>, #> #   timepoint_1_name <chr>, result <dbl>, parameter_id <chr>, … #>  #> attr(,\"class\") #> [1] \"ctasval_aggregated\""},{"path":"https://impala-consortium.github.io/ctasval/reference/get_anomaly_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Generate Anomaly Data — get_anomaly_data","title":"Generate Anomaly Data — get_anomaly_data","text":"function generates anomaly data applying specified anomaly function data frame.","code":""},{"path":"https://impala-consortium.github.io/ctasval/reference/get_anomaly_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generate Anomaly Data — get_anomaly_data","text":"","code":"get_anomaly_data(   df,   n_sites,   fun_anomaly,   anomaly_degree,   site_prefix = \"site\" )"},{"path":"https://impala-consortium.github.io/ctasval/reference/get_anomaly_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generate Anomaly Data — get_anomaly_data","text":"df Data frame containing study data. n_sites Number sites generate. fun_anomaly Function apply generate anomalies. anomaly_degree Degree anomaly add. site_prefix Prefix site names. Default \"site\".","code":""},{"path":"https://impala-consortium.github.io/ctasval/reference/get_anomaly_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generate Anomaly Data — get_anomaly_data","text":"data frame generated anomaly data.","code":""},{"path":[]},{"path":"https://impala-consortium.github.io/ctasval/reference/get_anomaly_scores.html","id":null,"dir":"Reference","previous_headings":"","what":"Get Anomaly Scores — get_anomaly_scores","title":"Get Anomaly Scores — get_anomaly_scores","text":"function calculates scores anomalies data frame.","code":""},{"path":"https://impala-consortium.github.io/ctasval/reference/get_anomaly_scores.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get Anomaly Scores — get_anomaly_scores","text":"","code":"get_anomaly_scores(   df,   n_sites,   fun_anomaly,   anomaly_degree,   feats,   thresh = NULL,   default_minimum_timepoints_per_series = 3,   default_minimum_subjects_per_series = 3,   default_max_share_missing_timepoints_per_series = 0.5,   default_generate_change_from_baseline = FALSE,   autogenerate_timeseries = TRUE )"},{"path":"https://impala-consortium.github.io/ctasval/reference/get_anomaly_scores.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get Anomaly Scores — get_anomaly_scores","text":"df Data frame containing study data. n_sites Number sites generate. fun_anomaly Function apply generate anomalies. anomaly_degree Degree anomaly add. feats Features calculate timeseries. thresh Threshold classification. Default NULL. default_minimum_timepoints_per_series Minimum timepoints per series. Default 3. default_minimum_subjects_per_series Minimum subjects per series. Default 3. default_max_share_missing_timepoints_per_series Maximum share missing timepoints per series. Default 0.5. default_generate_change_from_baseline Logical indicating whether generate change baseline. Default FALSE. autogenerate_timeseries Logical indicating whether auto-generate timeseries. Default TRUE.","code":""},{"path":"https://impala-consortium.github.io/ctasval/reference/get_anomaly_scores.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get Anomaly Scores — get_anomaly_scores","text":"data frame anomaly scores.","code":""},{"path":[]},{"path":"https://impala-consortium.github.io/ctasval/reference/get_ctas.html","id":null,"dir":"Reference","previous_headings":"","what":"Get CTAS — get_ctas","title":"Get CTAS — get_ctas","text":"function processes study using CTAS (Clinical Trial Anomaly Spotter) providing various parameters features.","code":""},{"path":"https://impala-consortium.github.io/ctasval/reference/get_ctas.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get CTAS — get_ctas","text":"","code":"get_ctas(   df,   feats,   default_minimum_timepoints_per_series = 3,   default_minimum_subjects_per_series = 3,   default_max_share_missing_timepoints_per_series = 0.5,   default_generate_change_from_baseline = FALSE,   autogenerate_timeseries = TRUE )"},{"path":"https://impala-consortium.github.io/ctasval/reference/get_ctas.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get CTAS — get_ctas","text":"df Data frame containing study data. feats Features calculate timeseries. default_minimum_timepoints_per_series Minimum timepoints per series. Default 3. default_minimum_subjects_per_series Minimum subjects per series. Default 3. default_max_share_missing_timepoints_per_series Maximum share missing timepoints per series. Default 0.5. default_generate_change_from_baseline Logical indicating whether generate change baseline. Default FALSE. autogenerate_timeseries Logical indicating whether auto-generate timeseries. Default TRUE.","code":""},{"path":"https://impala-consortium.github.io/ctasval/reference/get_ctas.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get CTAS — get_ctas","text":"data frame CTAS results.","code":""},{"path":[]},{"path":"https://impala-consortium.github.io/ctasval/reference/prep_sdtm_lb.html","id":null,"dir":"Reference","previous_headings":"","what":"Prepare SDTM LB Data — prep_sdtm_lb","title":"Prepare SDTM LB Data — prep_sdtm_lb","text":"function prepares LB (Laboratory) data SDTM (Study Data Tabulation Model) merging DM (Demographics) data.","code":""},{"path":"https://impala-consortium.github.io/ctasval/reference/prep_sdtm_lb.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Prepare SDTM LB Data — prep_sdtm_lb","text":"","code":"prep_sdtm_lb(lb, dm, scramble = TRUE)"},{"path":"https://impala-consortium.github.io/ctasval/reference/prep_sdtm_lb.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Prepare SDTM LB Data — prep_sdtm_lb","text":"lb Data frame containing LB data. dm Data frame containing DM data. scramble Logical indicating whether scramble SITEID DM data. Default TRUE.","code":""},{"path":"https://impala-consortium.github.io/ctasval/reference/prep_sdtm_lb.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Prepare SDTM LB Data — prep_sdtm_lb","text":"data frame prepared SDTM LB data.","code":""},{"path":"https://impala-consortium.github.io/ctasval/reference/sample_site.html","id":null,"dir":"Reference","previous_headings":"","what":"Sample Site Data — sample_site","title":"Sample Site Data — sample_site","text":"function samples one random site per parameter given data frame.","code":""},{"path":"https://impala-consortium.github.io/ctasval/reference/sample_site.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Sample Site Data — sample_site","text":"","code":"sample_site(df, site = \"sample_site\")"},{"path":"https://impala-consortium.github.io/ctasval/reference/sample_site.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Sample Site Data — sample_site","text":"df Data frame containing study data. site site sample . Default \"sample_site\".","code":""},{"path":"https://impala-consortium.github.io/ctasval/reference/sample_site.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Sample Site Data — sample_site","text":"data frame sampled site data.","code":""},{"path":[]}]
